@section stylesUp {
    @Styles.Render("~/Styles/plan")
}

<div id="plan-section">
    <div id="plan-loading">
        <div class="plan-loading-section">
            <div>Загрузка плана этажа...</div>
            <div>
                <img src="~/Content/images/gif/ajax-loader.gif" />
            </div>
        </div>
    </div>
</div>



<div id="roomevent-section" style="margin-left: 126px; padding-top: 25px;">
    <div id="roomevent-loading">
        <div class="roomevent-loading-section">
            <div>Загрузка рассписания...</div>
            <div>
                <img src="~/Content/images/gif/ajax-loader.gif" />
            </div>
        </div>
    </div>
</div>

<div id="map-section">
    <div id="map-loading">
        <div class="plan-loading-section">
            <div>Загрузка карты...</div>
            <div>
                <img src="~/Content/images/gif/ajax-loader.gif" />
            </div>
        </div>
    </div>
</div>


<script type="text/javascript">

    $(function () {
            $.ajax({
                url: '@Url.Action("Index", "Classroom")',
                method: 'GET',
                cache: false,
                dataType: 'html',

                success: function (result) {
                    $('#plan-section').html(result);
                },

                error: function(result) {
                    $('#plan-section').html(result);
                },

                function() {
                    $('#plan-loading').hide();
                }

            });


            $.ajax({
                url: '@Url.Action("MapPartial","Home")',
                method: 'GET',
                cache: false,
                dataType: 'html',

                success: function (result) {
                    $('#map-section').html(result);
                },

                error: function (result) {
                    $('#map-section').html(result);
                },

                function() {
                    $('#map-loading').hide();
                }

            });

            $.ajax({
                url: '@Url.Action("Index","RoomEvent")',
                method: 'GET',
                cache: false,
                dataType: 'html',

                success: function (result) {
                    $('#roomevent-section').html(result);

                    resetCurrentCalendarCell();
                    renderCalendar(currentCalendarMonth);
                    setDateHeader(currentCalendarCell);
                    renderTime(shortRoomEventTable);
                    renderRooms(shortRoomEventTable);
                    activateStaticSlider();
                },

                error: function (result) {
                    $('#roomevent-section').html(result);
                },

                function() {
                    $('#roomevent-loading').hide();
                }

            });


        });

    $(function() {

            $(document).on('mouseover', '.plan-room', function () {

                if ($(this).hasClass('-available')) {

                    var roomId = $(this).attr('id');
                    $('.show').show();
                    $.ajax({
                        url: '@Url.Action("AdditionalInfo", "Classroom")' + '/' + roomId,
                        method: 'GET',
                        cache: false,
                        dataType: 'html',

                        success: function (result) {
                            $('#show').html(result);
                            $('#plan-room-line').attr('class','show plan-room-line-detail-' + roomId);
                        }

                    });
                }

            }).on('mouseleave', '.plan-room', function () {
                $('.show').hide();
            });

        });


    $(function () {
            $(document).on('click', '.plan-room', function () {
                //if ($(this).hasClass('-available')) { when roles are applied. Now for admin only

                window.location.href = '/Classroom/RoomPage/' + $(this).attr('id');
                //}
            });
        });

</script>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    @Scripts.Render("~/bundles/map")
}