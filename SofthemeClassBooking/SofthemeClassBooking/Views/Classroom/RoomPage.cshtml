@using System.Web.Configuration
@model SofthemeClassBooking_BOL.Models.ClassRoomModel

@{
    ViewBag.Title = Model.Name;
}

@section stylesDeclarationInHeader {
    @Styles.Render("~/bundles/styles/plan")
}

@section scriptDeclarationInHeader
{
    @Scripts.Render("~/bundles/scripts/roompage")
}

<div style="position: relative;">

    <div id="plan-section" class="plan-section">
        <div id="plan-loading">
            <div class="plan-loading-section">
                <div>Загрузка плана этажа...</div>
                <div>
                    <img src="~/Content/images/gif/ajax-loader.gif" />
                </div>
            </div>
        </div>
    </div>

    @if (User.IsInRole(WebConfigurationManager.AppSettings["UserRoleAdmin"]))
    {
        <div class="plan-room-edit-buttons-position ">
            <div class="plan-room-edit-buttons">
                @if (@Model.IsLocked)
                {
                    <button id="plan-room-edit-open" class="plan-room-edit-buttons-up">Открыть</button>
                }
                else
                {
                    <button id="plan-room-edit-close" class="plan-room-edit-buttons-up">Закрыть</button>
                }
                <button id="plan-room-edit-change" class="plan-room-edit-buttons-down">Изменить</button>
            </div>
        </div>
    }

</div>

<div style="height: 335px">
    calendar goes here
</div>
<script type="text/javascript">

    classRoomDialogWindow = new DialogWindow ({
        title: '@Localization.DialogCancelRoomTitle',
        bodyMessage: '@Localization.DialogCancelRoomBody' });

    currentClassRoom = new ClassRoom(@Model.Id, '@Model.IsLocked');
    classRoomDialogWindow.setDialogAnswerNoHandler(cancelCloseClassRoom);
    classRoomDialogWindow.setDialogAnswerYesHandler(closeClassRoom);

    isUserAdmin = '@User.IsInRole(WebConfigurationManager.AppSettings["UserRoleAdmin"])';


    (function ($, window, document) {

        $(function () {

            loadRoomPagePlanSection();

        });
    }(window.jQuery, window, document));


</script>